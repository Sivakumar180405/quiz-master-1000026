{% extends 'base.html' %}
{% block content %}
<div class="admin-dashboard">
    <h2>Admin Dashboard</h2>
    
    <h3>Subjects & Quizzes</h3>
    <div class="buttons">
        <a href="{{ url_for('main.subject_create') }}">
            <button>Create Subject</button>
        </a>
    </div>
    {% for subject in subjects %}
        <div class="scontainer">
            <h3>{{ subject.name }}</h3>
            <p>{{ subject.description }}</p>
            <div class="buttons">
                <a href="{{ url_for('main.chapter_create', subject_id=subject.id) }}" method="GET"">
                    <button type="submit">Add Chapter</button>
                </a>
            </div>
            {% for chapter in subject.chapters %}
            <div class="ccontainer">
                <h4>ðŸ“– {{ chapter.name }}</h4>
                <div class="buttons">
                    <a href="{{ url_for('main.quiz_create', chapter_id=chapter.id) }}" method="GET">
                        <button type="submit">Add Quiz</button>
                    </a>
                    
                    <a href="{{ url_for('main.chapter_delete', chapter_id=chapter.id) }}" method="POST">
                        <button type="submit" class="delete-btn" onclick="return window.alert('Are you sure you want to delete this chapter and its quizzes?')">Delete Chapter</button>
                    </a>
                </div>
                {% for quiz in chapter.quizzes %}
                <div class="qcontainer">
                    <h5>{{ quiz.name }} Quiz ({{ quiz.duration }} minutes)</h5>
                    <div class="buttons">
                        <a href="{{ url_for('main.add_question', quiz_id=quiz.id) }}">
                            <button>Add Questions</button>
                        </a>
                        <a href="{{ url_for('main.quiz_delete', quiz_id=quiz.id) }}" method="POST">
                            <button type="submit" class="delete-btn" onclick="return window.alert('Are you sure you want to delete this quiz?')">Delete Quiz</button>
                        </a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
            <h4> chapters available yet.</h4>
        </div>
        {% endfor %}
        {% else %}
        <h3>No subjects available yet.</h3>
    </div>
    {% endfor %}
</div>
{% endblock %}